# textdomain wesnoth-RotR

[scenario]
    id=18_The_Great_Search
    next_scenario=19_Dambusters
    name=_"The Great Search" # displayed scenario name
    map_data="{~add-ons/Revenge_of_the_Rogue/maps/18_The_Great_Search.map}"
    {DEFAULT_SCHEDULE}
    turns=100
    victory_when_enemies_defeated=yes

    [side]
        side=1
        controller="human"
	team_name=1 # used to determine which side is enemy or allied
	# wmllint: local spelling foo
	user_team_name= _ "Rogues" # visible to the user

	##:: Leader Info
	type=Rogue
	id=Edwin
	name=_"Edwin"
	gender=male
	canrecruit=yes
	unrenamable=true
        shroud=yes
	##:: Gold and Income
	{GOLD 200 75 50}
	{INCOME 10 5 3}
    [/side]

    [side]
	##:: Side Info
	side=2
	controller=ai
	team_name=2
	user_team_name= _ "Northerners"

	##:: Leader Info
	type="Giant Spider"
	id=Arachne
	name=_"Arachne"
	canrecruit=yes
	unrenamable=true
        [modifications]
            [object]
                [effect]
                    apply_to=movement_costs
                    [movement_costs]
                        flat=50
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
        [status]
            guardian=yes
        [/status]
        [unit]
            type=Giant Mudcrawler
            side=2
            x=32
            y=76
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Mudcrawler
            side=2
            x=25
            y=77
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Mudcrawler
            side=2
            x=29
            y=79
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Mudcrawler
            side=2
            x=36
            y=78
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Mudcrawler
            side=2
            x=31
            y=78
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Mudcrawler
            side=2
            x=33
            y=79
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Fire Guardian
            side=2
            x=13
            y=4
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Fire Guardian
            side=2
            x=20
            y=7
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Fire Guardian
            side=2
            x=8
            y=6
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Fire Guardian
            side=2
            x=14
            y=11
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Fire Guardian
            side=2
            x=10
            y=11
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=52
            y=75
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=56
            y=74
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=59
            y=76
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=61
            y=79
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=54
            y=80
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=56
            y=79
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Scorpion
            side=2
            x=58
            y=78
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Yeti
            side=2
            x=75
            y=77
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Myrmidon
            side=2
            x=94
            y=36
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Myrmidon
            side=2
            x=88
            y=34
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Warrior
            side=2
            x=88
            y=33
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Warrior
            side=2
            x=84
            y=33
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Warrior
            side=2
            x=94
            y=33
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Warrior
            side=2
            x=90
            y=37
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Warrior
            side=2
            x=90
            y=37
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=83
            y=33
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=84
            y=34
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=85
            y=36
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=85
            y=38
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=87
            y=38
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=90
            y=38
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=93
            y=37
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=97
            y=38
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=96
            y=34
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Naga Fighter
            side=2
            x=91
            y=33
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=75
            y=88
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=85
            y=90
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=25
            y=93
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=17
            y=93
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=10
            y=81
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=25
            y=50
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=20
            y=49
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=77
            y=43
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=20
            y=25
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=89
            y=27
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=94
            y=4
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=83
            y=5
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=24
            y=88
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=94
            y=99
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Giant Rat
            side=2
            x=68
            y=98
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Young Ogre
            side=2
            x=37
            y=88
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Young Ogre
            side=2
            x=58
            y=88
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Young Ogre
            side=2
            x=88
            y=77
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Young Ogre
            side=2
            x=20
            y=37
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Cuttle Fish
            side=2
            x=40
            y=12
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Cuttle Fish
            side=2
            x=41
            y=11
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Cuttle Fish
            side=2
            x=43
            y=12
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=18
            y=57
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=20
            y=57
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=22
            y=58
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=24
            y=58
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=24
            y=60
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=24
            y=58
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Tentacle of the Deep
            side=2
            x=26
            y=59
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Water Serpent
            side=2
            x=47
            y=30
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Water Serpent
            side=2
            x=34
            y=31
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Water Serpent
            side=2
            x=32
            y=36
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Sea Serpent
            side=2
            x=95
            y=61
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Young Ogre
            side=2
            x=63
            y=64
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=31
            y=97
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=73
            y=94
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=94
            y=92
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=96
            y=97
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=57
            y=32
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=62
            y=34
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Blood Bat
            side=2
            x=60
            y=30
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=18
            y=66
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=16
            y=75
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Vampire Bat
            side=2
            x=30
            y=97
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dread Bat
            side=2
            x=86
            y=87
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=73
            y=21
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=69
            y=19
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=73
            y=18
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=76
            y=17
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=79
            y=21
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=79
            y=25
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=77
            y=27
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=73
            y=21
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=81
            y=23
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton
            side=2
            x=74
            y=18
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton Archer
            side=2
            x=75
            y=19
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton Archer
            side=2
            x=81
            y=21
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton Archer
            side=2
            x=77
            y=15
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton Archer
            side=2
            x=75
            y=19
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Skeleton Archer
            side=2
            x=84
            y=26
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Troll Whelp
            side=2
            x=67
            y=69
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Troll Whelp
            side=2
            x=97
            y=71
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Ghast
            side=2
            x=8
            y=37
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Spectre
            side=2
            x=7
            y=44
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Shadow
            side=2
            x=19
            y=44
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Wraith
            side=2
            x=8
            y=30
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Necrophage
            side=2
            x=19
            y=30
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Ghost
            side=2
            x=80
            y=48
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Ghoul
            side=2
            x=89
            y=46
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Chocobone
            side=2
            x=93
            y=52
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Drake Warden
            side=2
            x=77
            y=54
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Drake Enforcer
            side=2
            x=43
            y=4
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Drake Enforcer
            side=2
            x=45
            y=4
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Drake Blademaster
            side=2
            x=3
            y=65
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Hurricane Drake
            side=2
            x=72
            y=34
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Troll Warrior
            side=2
            x=97
            y=82
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Troll Rocklobber
            side=2
            x=5
            y=62
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Troll Shaman
            side=2
            x=29
            y=52
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Orcish Warrior
            side=2
            x=25
            y=25
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Orcish Crossbowman
            side=2
            x=26
            y=24
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Orcish Crossbowman
            side=2
            x=24
            y=24
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=74
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=75
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=76
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=77
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=78
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=79
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=80
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=81
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=82
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=2
            y=83
        [/unit]

        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=74
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=75
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=76
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=77
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=78
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=79
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=80
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=81
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=82
        [/unit]
        [unit]
            type=Walking Corpse
            side=2
            x=4
            y=83
        [/unit]

        [unit]
            type=Soulless
            side=2
            x=3
            y=84
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=75
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=76
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=77
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=78
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=79
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=80
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=81
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=82
        [/unit]
        [unit]
            type=Soulless
            side=2
            x=3
            y=83
        [/unit]
        [unit]
            type=Necromancer
            gender=male # Cannot be female as would give same graphic as Valda
            side=2
            x=4
            y=84
        [/unit]

        [unit]
            type=Dark Adept
            side=2
            x=51
            y=59
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=60
            y=51
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=64
            y=51
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=58
            y=42
            [status]
                guardian=yes
            [/status]
            facing=se
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=61
            y=44
            [status]
                guardian=yes
            [/status]
            facing=se
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=49
            y=41
            [status]
                guardian=yes
            [/status]
            facing=n
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=51
            y=41
            [status]
                guardian=yes
            [/status]
            facing=n
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=42
            y=44
            [status]
                guardian=yes
            [/status]
            facing=nw
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=44
            y=43
            [status]
                guardian=yes
            [/status]
            facing=nw
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=36
            y=49
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=40
            y=49
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=42
            y=56
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=44
            y=56
            [status]
                guardian=yes
            [/status]
            facing=sw
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=49
            y=59
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=58
            y=56
            [status]
                guardian=yes
            [/status]
        [/unit]
        [unit]
            type=Dark Adept
            side=2
            x=56
            y=56
            [status]
                guardian=yes
            [/status]
            facing=se
        [/unit]
    [/side]

    [terrain_graphics]
        x,y=1,1
        [tile]
            x,y=1,1
            type=*
        [/tile]
        [image]
            name=giant-web.png
            layer=100
            base=1,1
        [/image]
    [/terrain_graphics]

    {SINI_DEATH}
    {KARDURAS_DEATH}
    {PELAITHSTORN_DEATH}
    [event]
        name=setupdoor
        # Open one of six doors to the end

        [set_variables]
            name=door_locations
            [value]
                x1=44
                y1=49
                x2=43
                y2=49
                doorx=38
                doory=52
            [/value]
            [value]
                x1=46
                y1=53
                x2=45
                y2=54
                doorx=41
                doory=67
            [/value]
            [value]
                x1=50
                y1=54
                x2=50
                y2=55
                doorx=50
                doory=62
            [/value]
            [value]
                x1=56
                y1=50
                x2=57
                y2=51
                doorx=63
                doory=54
            [/value]
            [value]
                x1=54
                y1=47
                x2=55
                y2=47
                doorx=56
                doory=34
            [/value]
            [value]
                x1=50
                y1=46
                x2=50
                y2=45
                doorx=50
                doory=37
            [/value]
            [value]
                x1=47
                y1=47
                x2=46
                y2=46
                doorx=38
                doory=38
            [/value]
            [value]
                x1=53
                y1=54
                x2=54
                y2=54
                doorx=58
                doory=61
            [/value]
        [/set_variables]
        [set_variable]
            name=opendoor
            rand=0..6
        [/set_variable]
        [terrain]
            x=$door_locations[$opendoor].x1
            y=$door_locations[$opendoor].y1
            terrain=Ur
        [/terrain]
        [terrain]
            x=$door_locations[$opendoor].x2
            y=$door_locations[$opendoor].y2
            terrain=Ur
        [/terrain]
        [set_variable]
            name=targetdoor_x
            value=$door_locations[$opendoor].doorx
        [/set_variable]
        [set_variable]
            name=targetdoor_y
            value=$door_locations[$opendoor].doory
        [/set_variable]
        [clear_variable]
            name=opendoor
        [/clear_variable]
        [clear_variable]
            name=door_locations
        [/clear_variable]
    [/event]


    [event]
        name=prestart
        {RECALL_CHARACTERS}
        [recall]
            id=Pelaithstorn
        [/recall]

        {SCATTER_UNITS 40 "Goblin Impaler,Goblin Spearman,Orcish Grunt,Orcish Archer" 3 (
        terrain=Uu
        x=50-97
        y=2-18

        [not]
            [filter]
            [/filter]
        [/not]

        [not]
            [filter_adjacent_location]
                [filter]
                [/filter]
            [/filter_adjacent_location]
        [/not]
        ) (
        side=2
        generate_name=yes
        random_traits=yes
        [status]
            guardian=yes
        [/status]
        )}


    [/event]
    [event]
	name=start
	[message]
	    speaker=narrator
	    image=wesnoth-icon.png
	    message=_"The band arrives in the lowest floor of the Dwarven Kingdom."
	[/message]
        [item]
            x,y=50,50
            halo=terrain/giant-web.png
        [/item]
        [item]
            x,y=49,49
            halo=terrain/cleric-webbed.png
        [/item]
        [item]
            x,y=53,51
            halo=terrain/cleric-webbed_2.png
        [/item]
        [item]
            x,y=48,51
            halo=terrain/cleric-webbed_3.png
        [/item]

        [fire_event]
            name=setupdoor
        [/fire_event]
        [message]
            speaker=Edwin
            message="What can you tell me about this level."
        [/message]
        [message]
            speaker=Karduras
            message="Almost nothing. This level was flooded many centuries ago. Valda must have found a way to drain some or all of the water out."
        [/message]
        [message]
            speaker=Sini
            message="Kalliope can feel our presence. I may be able to help narrow down the search. Keep opening doors and if Kalliope can feel one of us getting near I will tell you."
        [/message]
        [objectives]
            side=1
            [objective]
		description= _ "Free Kalliope."
		condition=win
            [/objective]
            [objective]
                caption= _ "Alternative objective:"
		description= _ "Defeat all enemy leaders"
		condition=win
            [/objective]
	    [objective]
		description= _ "Death of Edwin"
		condition=lose
	    [/objective]
	    {TURNS_RUN_OUT}
	    [gold_carryover]
		bonus=yes
		carryover_percentage=40
	    [/gold_carryover]
        [/objectives]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            [filter_location]
                [filter_adjacent_location]
                    terrain=Xol
                [/filter_adjacent_location]
            [/filter_location]
        [/filter]
        [sound]
            name=large_creaking_door.wav
        [/sound]
        [store_locations]
            terrain=Xol
            [filter_adjacent_location]
                x=$x1
                y=$y1
            [/filter_adjacent_location]
            variable=door_location
        [/store_locations]
        [terrain]
            x=$door_location.x
            y=$door_location.y
            terrain=Ur
        [/terrain]
        [clear_variable]
            name=door_location
        [/clear_variable]
        [redraw]
            clear_shroud=yes
        [/redraw]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            [filter_location]
                [filter_adjacent_location]
                    terrain=Xos
                [/filter_adjacent_location]
            [/filter_location]
        [/filter]
        [sound]
            name=large_creaking_door.wav
        [/sound]
        [store_locations]
            terrain=Xos
            [filter_adjacent_location]
                x=$x1
                y=$y1
            [/filter_adjacent_location]
            variable=door_location
        [/store_locations]
        [terrain]
            x=$door_location.x
            y=$door_location.y
            terrain=Ur
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]
        [if]
            [variable]
                name=targetdoor_x
                equals=$door_location.x
            [/variable]
            [variable]
                name=targetdoor_y
                equals=$door_location.y
            [/variable]
            [then]
                [message]
                    id=Sini
                    message="Kalliope tells me that she can feel that $unit.name| is very near, this is the right way."
                [/message]
                [message]
                    id=$unit.id
                    message="I can see spider webs on the ceiling ahead."
                [/message]
            [/then]
            [else]
                [message]
                    id=Sini
                    message="Kalliope tells me that she can feel the presence of $unit.name| drawing close to her, but feels there is no direct route that way."
                [/message]
                [message]
                    id=$unit.id
                    message="There is nothing special in this room. Looks like a dead end."
                [/message]
            [/else]
        [/if]
        [clear_variable]
            name=door_location
        [/clear_variable]
    [/event]

    [event]
        name=sighted
        [filter]
            id=Arachne
        [/filter]
        [message]
            speaker=$second_unit.id
            message="I found the spider who can make conductive web. It is enormous. We will need to kill it before we can free Kalliope and the other elves."
        [/message]
        [objectives]
            side=1
            [objective]
		description= _ "Defeat enemy leader"
		condition=win
            [/objective]
	    [objective]
		description= _ "Death of Edwin"
		condition=lose
	    [/objective]
	    {TURNS_RUN_OUT}
	    [gold_carryover]
		bonus=yes
		carryover_percentage=40
	    [/gold_carryover]
        [/objectives]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Arachne
        [/filter]
        [message]
            speaker=$second_unit.id
            message="We got him. Now lets shake this web a bit."
        [/message]
        {UNSTORE_SINI_18}
        [remove_item]
            x=49
            y=49
        [/remove_item]
        {NAMED_LOYAL_UNIT 1 (Dark Elf Cleric) 49 49 (Kalliope) ( _ "Kalliope")}
        [remove_item]
            x=48
            y=51
        [/remove_item]
        {NAMED_LOYAL_UNIT 1 (Dark Elf Enchantress) 48 51 (Rauha) ( _ "Rauha")}
        [remove_item]
            x=53
            y=51
        [/remove_item]
        {NAMED_LOYAL_UNIT 1 (Dark Elf Sorceress) 53 51 (Vaalean) ( _ "Vaalean")}
        [redraw]
        [/redraw]
        [message]
            speaker=Kalliope
            message="It is wonderful to finally see you with my own eyes."
        [/message]
        [message]
            speaker=Rauha
            message="Valda's power over us is broken, we will no longer fight for her."
        [/message]
        [message]
            speaker=Vaalean
            message="Our people will help you end the tyranny of Valda once and for all."
        [/message]
	[message]
	    speaker=narrator
	    image=wesnoth-icon.png
	    message=_"You can now recruit Dark Elves."
	[/message]
        [message]
            speaker=Sini
            message="Can you tell us why Valda came here in the first place?"
        [/message]
        [message]
            speaker=Kalliope
            message="Yes, she came for a most powerful weapon. She has brought back one of the most ancient races of all, and has further developed her psychic fields to control them. With this force, she can conquer the world. I will tell you more, but there is important information I must share with you."
        [/message]
        [message]
            speaker=Sini
            message="Go ahead."
        [/message]
        [message]
            speaker=Kalliope
            message="Retaking the key parts of the Dwarvish kingdom has dealt Valda's plans a heavy blow and she is abandoning the whole underground Kingdom and going above the mountain. She has left behind a force to flood the mines and seal them."
        [/message]
        [message]
            speaker=Karduras
            message="If we do not stop them quickly, our newly reclaimed Dwarvish Kingdom will be cut off from the surface forever." 
        [/message]
        [message]
            speaker=Kalliope
            message="It gets worse, despite many weeks of fighting, you have only destroyed less than half of her total forces and now she marches back up to the town above the mountain and then from there she will seek to march on all the Kingdoms of men. She may even have her secret weapon finished already."
        [/message]
        [message]
            speaker=Edwin
            message="Sini, take your shamans and these elves and stop the mine-sealers. We will run ahead of you and stop the attack on the town. Good luck." 
        [/message]
    [/event]
    [event]
        name=victory
        {UNSTORE_KARDURAS}
        {UNSTORE_SINI}
        {UNSTORE_PELAITHSTORN}
    [/event]
[/scenario]